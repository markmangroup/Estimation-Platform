{% load static %}
<div class="table-responsive">
  <table id="stockTable" class="table table-striped table-bordered" >
    <thead>
      <th>Internal ID</th>
      <th>Location</th>
      <th>Date</th>
      <th>Original Quantity</th>
      <th>New Quantity</th>
      <th>Plus</th>
      <th>Minus</th>
      <th>Reason</th>
      <th>Comment</th>
    </thead>
    <tbody>
      {% for record in records %}
      <tr>
        <td>{{ record.internal_id }}</td>
        <td>{{ record.location }}</td>
        <td>
          <input
            type="date"
            class="form-control today-date wizard-required"
            value="{{ record.date }}"
          />
        </td>
        <td class="form-control">
          {{ record.current_quantity }}
        </td>
        <td>
          <input
            type="number"
            class="form-control"
            value="{{ record.new_quantity }}"
            disabled
          />
        </td>
        <td>
          <input
            type="number"
            class="form-control"
            value="{{ record.plus }}"
            disabled
          />
        </td>
        <td>
          <input
            type="number"
            class="form-control"
            value="{{ record.minus }}"
            disabled
          />
        </td>
        <td>
          <select class="select2 form-control" name="reason">
              <option value="other" {% if stock_adjustment.reason == 'other' %}selected{% endif %}>Other</option>
              <option value="inspection" {% if stock_adjustment.reason == 'inspection' %}selected{% endif %}>Inspection</option>
              <option value="purchase" {% if stock_adjustment.reason == 'purchase' %}selected{% endif %}>Purchase</option>
              <option value="wh_difference" {% if stock_adjustment.reason == 'wh_difference' %}selected{% endif %}>WH differences</option>
            </select>
        </td>
        <td><input type="text" class="form-control" /></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<nav aria-label="Page navigation example">
  <ul class="pagination" id="paginationControls">
    <li class="page-item" id="prevPage">
      <a class="page-link" href="#" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
        <span class="sr-only">Previous</span>
      </a>
    </li>
    <li class="page-item" id="nextPage">
      <a class="page-link" href="#" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only">Next</span>
      </a>
    </li>
  </ul>
</nav>

<script>
  $(document).ready(function() {
    const rowsPerPage = 10;
    const rows = $("#stockTable tbody tr");
    const totalRows = rows.length;
    const totalPages = Math.ceil(totalRows / rowsPerPage);
    let currentPage = 1;
  
    function showPage(page) {
      rows.hide();
      const start = (page - 1) * rowsPerPage;
      const end = start + rowsPerPage;
      rows.slice(start, end).show();
  
      updatePagination(page);
    }
  
    function updatePagination(page) {
      $('#paginationControls .page-item').not('#prevPage, #nextPage').remove();
      
      for (let i = 1; i <= totalPages; i++) {
        const pageItem = $(`<li class="page-item"><a class="page-link" href="#">${i}</a></li>`);
        if (i === page) {
          pageItem.addClass('active');
        }
        pageItem.on('click', function(e) {
          e.preventDefault();
          currentPage = i;
          showPage(currentPage);
        });
        $('#paginationControls').children('ul').insertBefore($('#nextPage'), $('#nextPage').prev());
        $('#nextPage').before(pageItem);
      }
      if (page === 1) {
        $('#prevPage').addClass('disabled');
      } else {
        $('#prevPage').removeClass('disabled');
      }
  
      if (page === totalPages) {
        $('#nextPage').addClass('disabled');
      } else {
        $('#nextPage').removeClass('disabled');
      }
      $("#pageNumber").text(page);
    }
  
    showPage(currentPage);
    $("#nextPage").click(function(e) {
      e.preventDefault();
      if (currentPage < totalPages) {
        currentPage++;
        showPage(currentPage);
      }
    });
    $("#prevPage").click(function(e) {
      e.preventDefault();
      if (currentPage > 1) {
        currentPage--;
        showPage(currentPage);
      }
    });
  });
  
</script>