{% load static %}

<!-- Print Button Start -->
<div class="float-left my-2 mt-3">
  <button type="button" class="btn btn-primary print-button" data-table-id="table8">Print</button>
</div>
<!-- Print Button End -->

<!-- New Table View Start -->
<div class="mt-5">
    <table id="table8" class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="max-width:100px">Delivery ID</th>
          <th style="max-width:100px">Total Quantity</th>
          <th style="max-width:100px">CheckIn Date</th> 
          <th style="max-width:100px">Inspection Date</th> 
        </tr>
      </thead>
      <tbody>

        <!--Main Row 1 -->
        <tr>
          <td> OR20240200018-2 </td>
          <td> 28 </td>
          <td>2 Apr, 2024</td>
          <td><input type="date" class="form-control wizard-required today-date"></td>
        </tr>

        <tr>
          <td>
          </td>
  
          <!-- Inner table Start -->
          <td colspan="100">
            </div>
            <div class="table-responsive">
              <table
              id="tableBody"
                class="table table-striped table-bordered"
                  >
                <thead>
                  <tr class="text-center">
                    <th colspan="5" class="align-top">Items Information</th>
                  </tr>
                  <tr>
                    <th>Sr No</th>
                    <th>Internal Id</th>
                    <th class="text-nowrap">Items</th>
                    <th >Quantity</th>
                  </tr>
                </thead>
  
                <tbody>
                    <tr>
                      <td>1</td>
                      <td> 20315 </td>
                      <td class="text-nowrap">Rental: 10" Plain Coupler</td>
                      <td class="text-nowrap">
                        <input type="text" class="form-control inspection-qty wizard-required" id="field-disabled" data-value="14" value="14" style="width: 100px;">
                        <span class="info mark-completed"><i class="ft-info"></i> Mark inspection as completed!! <a class="marked"><i class="ft-check success"></i></a>  <a><i class="ft-x danger"></i></a></span>
                        <small style="color: darkslategray;"></small>
                      </td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td> 20314 </td>
                      <td class="text-nowrap">Rental: 10" Tapped Coupler</td>
                      <td class="text-nowrap">
                        <input type="text" class="form-control inspection-qty wizard-required" data-value="14" value="14" style="width: 100px;">
                        <span class="info mark-completed"><i class="ft-info"></i> Mark inspection as completed!! <a class="marked"><i class="ft-check success"></i></a>  <a><i class="ft-x danger"></i></a></span>
                        <small style="color: darkslategray;"></small>
                      </td>
                    </tr>
                </tbody>
                
              </table>
            </div>
            
          </td>
        </tr> 
  
        <!--Main Row 2 -->
        {% comment %} <tr>
          <td> PROJ016968	R2/2 </td>
          <td> 28 </td>
          <td>2 Apr, 2024</td>
          <td><input type="date" class="form-control wizard-required"></td>
        </tr>

        <tr>
          
          <td>
          </td>
  
          <!-- Inner table Start -->
          <td colspan="100">
            </div>
            <div class="table-responsive">
              <table
              id="tableBody"
                class="table table-striped table-bordered"
                  >
                <thead>
                  <tr class="text-center">
                    <th colspan="5" class="align-top">Items Information</th>
                  </tr>
                  <tr>
                    <th>Sr No</th>
                    <th>Internal Id</th>
                    <th class="text-nowrap">Items</th>
                    <th >Quantity</th>
                  </tr>
                </thead>
  
                <tbody>
                    <tr>
                      <td>1</td>
                      <td> 20313 </td>
                      <td class="text-nowrap">Rental: 10" X 40' Yelomine Mainline</td>
                      <td class="text-nowrap"> 
                        <input type="text" class="form-control inspection-qty wizard-required" value="28" style="width: 100px;">
                        <span class="info mark-completed"><i class="ft-info"></i> Mark inspection as completed!! <a class="marked"><i class="ft-check success"></i></a>  <a><i class="ft-x danger"></i></a></span>
                        <small style="color: darkslategray;"></small>
                    </td>
                    </tr>
                </tbody>
                
              </table>
            </div>
            
          </td>
        </tr> {% endcomment %}

      </tbody>
    </table>
</div>
<!-- New Table View End -->

<!-- Old Table View Start -->
<!-- <div class="table-responsive mt-4">
    <table class="table table-stripted file-export">
        <thead>
            <th>Delivery ID</th>
            <th>Ordered Quantity</th>
            <th>Retuned Quantity</th>
            <th>CheckIn Date</th>
            <th>Retuned Date</th>
            <th>Status</th>
        </thead>
        <tbody>
            <tr>
                <td>RDLI-1</td>
                <td>28</td>
                <td class="danger">25</td>
                <td>1 Oct, 2024</td>
                <td>2 Oct, 2024</td>
                <td><button class="btn btn-success">Completed</button></td>
            </tr>

            <tr>
                <td>RDLI-2</td>
                <td>28</td>
                <td class="success">28</td>
                <td>1 Oct, 2024</td>
                <td>2 Oct, 2024</td>
                <td><button class="btn btn-success">Completed</button></td>
            </tr>
            
        </tbody>
    </table>
</div> -->
<!-- Old Table View End -->

<!-- Stock Adjustment Modal Start -->
<div class="modal fade text-left" id="inspection_stock_adjustment" tabindex="-1" role="dialog" aria-labelledby="myModalLabel33" aria-hidden="true" data-backdrop="false">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h4 class="modal-title" id="myModalLabel5">PROJ016968 R1/2 : Stock Adjustment</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true"><i class="ft-x font-medium-2 text-bold-700"></i></span>
            </button>
        </div>
        <div class="modal-body">
            <div class="row">
      
                <div class="col-6">
                  <label>Item Number</label>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Item Number"
                      value="20315"
                    />
                  </div>
                </div>

                <div class="col-6">
                  <label>Location</label>
                  <div class="form-group">
                    <input type="text"class="form-control"placeholder="Location"value="Colusa"/>
                  </div>
                </div>

                <div class="col-6">
                  <label>Date</label>
                  <div class="form-group">
                    <input type="date" class="form-control today-date">
                  </div>
                </div>

                <div class="col-6">
                  <label>Current Quantity</label>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Quantity"
                      value="1593"
                      disabled
                    />
                  </div>
                </div>
                
                <div class="col-6 hide">
                  <label>Revised Quantity</label>
                  <div class="form-group">
                    <input
                      type="text"
                      id="revisedQuantity"
                      class="form-control"
                      placeholder="Revised Quantity"
                      value=""
                    />
                  </div>
                </div>

                <div class="col-6 hide">
                  <label>Plus Quantity</label>
                  <div class="form-group">
                    <input
                      type="text"
                      id="PluseQuantity"
                      class="form-control "
                      placeholder="Plus Quantity"
                      value=""
                    />
                  </div>
                </div>
                
                <div class="col-6 hide">
                  <label>Minus Quantity</label>
                  <div class="form-group">
                    <input
                      type="text"
                      id="minusQuantity"
                      class="form-control "
                      placeholder="Quantity"
                      value=""
                    />
                  </div>
                </div>
                
                <div class="col-6">
                  <label>Reason</label>
                    <div class="form-group">
                      <select class="select2 form-control">
                        <option value="Inspection">Inspection</option>
                          <option value="Other">Other</option>
                          <option value="Purchase">Purchase</option>
                          <option value="WH diffrences">WH diffrences</option>
                          <option value="Not return from customer">Not return from customer</option>
                      </select>
                    </div>
                </div>
                <div class="col-6">
                  <label>Comment</label>
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Comment"
                      value="PROJ016968 R1/2"
                    />
                  </div>
                </div>
  
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal" aria-label="Close">Cancel</button>
          <button type="button" class="btn btn-success">Save</button>
        </div>
      </div>
    </div>
</div>
<!-- Stock Adjustment Modal End -->

<!-- Calculation of stock adjustment -->
<script>
  $(document).ready(function() {
      const currentQuantity = 1593;
      const $plusInput = $('#PluseQuantity');
      const $minusInput = $('#minusQuantity');
      const $revisedInput = $('#revisedQuantity');
  
      function updatePlusQuantity() {
          const enteredRevisedQuantity = parseFloat($revisedInput.val()) || 0;
          const newPlusQuantity = Math.max(0, enteredRevisedQuantity - currentQuantity);
          $plusInput.val(newPlusQuantity);
      }
  
      
      function updateMinusQuantity() {
          const enteredRevisedQuantity = parseFloat($revisedInput.val()) || 0;
          const newMinusQuantity = Math.max(0, currentQuantity - enteredRevisedQuantity);
          $minusInput.val(newMinusQuantity);
      }
  
      
      function updateRevisedQuantity() {
          const plusQuantity = parseFloat($plusInput.val()) || 0;
          const minusQuantity = parseFloat($minusInput.val()) || 0;
          const newRevisedQuantity = currentQuantity + plusQuantity - minusQuantity;
          $revisedInput.val(newRevisedQuantity);
      }
  
      
      $plusInput.on('input', function() {
          updateRevisedQuantity(); 
          updateMinusQuantity();   
      });
  
      $minusInput.on('input', function() {
          updateRevisedQuantity(); 
          updatePlusQuantity();    
      });
  
      $revisedInput.on('input', function() {
          updatePlusQuantity();    
          updateMinusQuantity();   
      });
  

      updateRevisedQuantity();
      updatePlusQuantity();
      updateMinusQuantity();
  });
</script>
<!-- Calculation of stock adjustment -->
